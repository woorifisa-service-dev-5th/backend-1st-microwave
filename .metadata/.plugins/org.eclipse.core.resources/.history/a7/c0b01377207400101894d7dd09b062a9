package dev.syntax.model;

import java.util.ArrayList;
import java.util.List;

public class Microwave {

	private List<MicrowaveListener> listeners = new ArrayList<>();
	private boolean isOpened;
	private boolean isRunning;
	private int inputTime = 23;
	private int temperature;
	
	

	public Microwave() {
		super();
		this.isOpened = false;
		this.isRunning = false;
		this.temperature = 20;

	}
	
	public void addListener(MicrowaveListener listener) {
		listeners.add(listener);
	}
	
	public int getTemperature() {
		return temperature;
	}
	
	public void increaseTemp(int temp) {
		if (this.temperature + temp >= 100) {
			this.temperature = 100;			
		} else {
			this.temperature += temp;
		}
	}
	
	public void decreaseTemp(int temp) {
		if (this.temperature - temp <= 20) {
			this.temperature = 20;
		} else {
			this.temperature -= temp;
		}
	}
	
	public boolean getIsOpened() {
		return isOpened;
	}

	public boolean getIsRunning() {
		return isRunning;
	}
	
	public void turnOn() {
		if (!isOpened) {
			this.isRunning = true;	
			for (MicrowaveListener listener : listeners) {
				listener.onStart();
			}
		} else {
			System.out.println("문을 닫아주세요!");
		}
	}
	
	public void turnOff() {
			this.isRunning = false;
			for (MicrowaveListener listener : listeners) {
				listener.onStop();
			}
	}
	
	public void setDoorOpened() {
		this.isOpened = true;
		turnOff();
	}
	
	public void setDoorClosed() {
		this.isOpened = false;
		if(this.inputTime > 0) {
			turnOn();
		} 
	}
	
	public void setTime(int seconds) {
		this.inputTime = seconds;
	}
	
	public int getTime() {
		return this.inputTime;
	}
	
}